{% extends '::base.html.twig' %}

{% block body %}

<div class="row">
    <div class="col-lg-12">

        <a href="{% if (isDemoMode) %}/demo{% endif %}{{ path('testcases.index') }}">◀ Back to testcases list</a>

        {% if (testresult.har) %}
            <a class="pull-right" target="_blank" href="http://www.softwareishard.com/har/viewer/?inputUrl={{ app.request.getSchemeAndHttpHost() }}{{ path('testresult-show-har', {'testresultId': testresult.id}) }}">Show testrun performance waterfall ▶</a>
        {% endif %}

        <h4 class="page-header">Testresult details</h4>

        <p>
            <strong>Testcase: </strong>
            <a
                {% if (not isDemoMode) %}
                    href="{{ path('testcases.edit', {'testcaseId': testresult.testcase.id}) }}"
                {% else %}
                    data-toggle="tooltip" data-placement="top" title="Not available in demo mode"
                {% endif %}
            >{{ testresult.testcase.title }}</a>
            <br>

            <strong>Date and time of run: </strong>
            {{ testresult.datetimeRun|date('Y-m-d H:i:s') }}
            <br>

            <strong>Exit code: </strong>
            {{ testresult.exitCode }}
        </p>

        {% if (testresult.failScreenshotFilename) %}
            <p>
                <a target="_blank" href="{{ path('testresult-screenshots', {'filename': testresult.failScreenshotFilename}) }}.png"><img class="img-thumbnail" width="256" src="{{ path('testresult-screenshots', {'filename': testresult.failScreenshotFilename}) }}_256.png"></a>
                <br>
                <small>Failure step screenshot - click to enlarge</small>
            </p>
        {% endif %}

        <p>
            <strong>Output: </strong>
            <br>
            <pre class="journeymonitor-testresult-output">{{ testresult.output }}</pre>
        </p>
    </div>
</div>

{% endblock %}
